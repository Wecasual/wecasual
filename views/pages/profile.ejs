<% include ../partials/header.ejs %>

  <div class="container top-spacer">
  	<!-- Intro section -->
  	<div class = "my-3">
      <h1>Your Profile</h1>
      <hr>
      <img src='<%= user.steaminfo.photos[2].value %>' alt='Your Avatar Image' />
      <span class="mr-3 display-3 align-middle p-5"><%= user.steaminfo.displayName %></span>
      <div class="row my-4">
        <div class="col">
          <h3>Email: <%= user.email %></h3>
        </div>
        <div class="col">
          <h3>Update email:</h3>
          <form method="POST" action="/profile/updateEmail">
  					<div class="form-group ">
  						<input type="text" name="email" class="form-control" placeholder='Update email'>
  					</div>
  					<div class="form-group text-center">
  							<input type="submit" value="Submit" class = "btn btn-default">
  					</div>
  				</form>
        </div>
    </div>
  </div>

  <!-- Message for email input correct or not -->
	<div class=alert>
		<% if(error){ %>
			<div class="alert-red">
				<%= error %>
				<span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
			</div>
		<% }
		else if(message){ %>
			<div class="alert-green">
				<%= message %>
				<span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
			</div>
		<% } %>
	</div>

	<!-- Close ALERT code -->
	<script>
		var close = document.getElementsByClassName("closebtn");
		var i;
		for (i = 0; i < close.length; i++) {
				close[i].onclick = function(){
						var div = this.parentElement.parentElement;
						div.style.opacity = "0";
						setTimeout(function(){ div.style.display = "none"; }, 600);
				}
		}
	</script>

<% include ../partials/footer.ejs %>
